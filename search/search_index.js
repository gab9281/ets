var __index = {"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"A propos","text":"<p>EvalueTonSavoir est une plateforme open source et auto-h\u00e9berg\u00e9e qui poursuit le d\u00e9veloppement du code provenant de https://github.com/ETS-PFE004-Plateforme-sondage-minitest. Cette plateforme minimaliste est con\u00e7ue comme un outil d'apprentissage et d'enseignement, offrant une solution simple et efficace pour la cr\u00e9ation de quiz utilisant le format GIFT, similaire \u00e0 Moodle.</p>"},{"location":"index.html#fonctionnalites-cles","title":"Fonctionnalit\u00e9s cl\u00e9s","text":"<ul> <li>Open Source et Auto-h\u00e9berg\u00e9 : Poss\u00e9dez et contr\u00f4lez vos donn\u00e9es en d\u00e9ployant la plateforme sur votre propre infrastructure.</li> <li>Compatibilit\u00e9 GIFT : Cr\u00e9ez des quiz facilement en utilisant le format GIFT, permettant une int\u00e9gration transparente avec d'autres syst\u00e8mes d'apprentissage.</li> <li>Minimaliste et Efficace : Une approche bare bones pour garantir la simplicit\u00e9 et la facilit\u00e9 d'utilisation, mettant l'accent sur l'essentiel de l'apprentissage.</li> </ul>"},{"location":"index.html#contribution","title":"Contribution","text":"<p>Actuellement, il n'y a pas de mod\u00e8le \u00e9tabli pour les contributions. Si vous constatez quelque chose de manquant ou si vous pensez qu'une am\u00e9lioration est possible, n'h\u00e9sitez pas \u00e0 ouvrir un issue et/ou une PR)</p>"},{"location":"index.html#liens-utiles","title":"Liens utiles","text":"<ul> <li>D\u00e9p\u00f4t d'origine Frontend</li> <li>D\u00e9p\u00f4t d'origine Backend</li> <li>Documentation (Wiki)</li> </ul>"},{"location":"index.html#license","title":"License","text":"<p>EvalueTonSavoir is open-sourced and licensed under the MIT License.</p>"},{"location":"developpeur/index.html","title":"Structure haut niveau","text":""},{"location":"developpeur/index.html#but-du-projet","title":"But du projet","text":"<p>\u00c9valueTonSavoir a \u00e9t\u00e9 cr\u00e9er d\u00fb aux gros co\u00fbts des versions entreprises des logiciels similaires tels que Socrative et Kahoot. Le b\u00fbt principal est d\u2019\u00eatre capable d\u2019avoir une plateforme auto-h\u00e9berg\u00e9e et bien int\u00e9gr\u00e9e dans les syst\u00e8mes d\u00e9j\u00e0 pr\u00e9sents des \u00e9tablissements scolaire.</p>"},{"location":"developpeur/index.html#requis","title":"Requis","text":"<p>Le but du projet \u00e9tant un outils gratuis/libre afin d'am\u00e9liorer l'apprentissage, celui-ci a les b\u00fbts suivants :</p> <ul> <li>Permettre aux personnels enseignant de cr\u00e9er des tests</li> <li>Permettre aux enseignant de collecter les r\u00e9sultats des tests</li> <li>Permettre aux \u00e9tudiants de prendre ces tests</li> <li>Permettre aux \u00e9tudiants d'avoir une r\u00e9troaction</li> </ul> <p>Afin de limiter le niveau de difficult\u00e9 d'int\u00e9gration du personnel enseignant:</p> <ul> <li>L'utilisation du format <code>GIFT</code> d\u00e9ja pr\u00e9sent dans moodle doit \u00eatre utilis\u00e9</li> <li>Le personnel et les \u00e9tudiants doivent \u00eatre capable de s'authentifier avec le portail de l'\u00e9cole</li> <li>Le d\u00e9marage du quiz doit se faire de facon rapide et \u00e9fficace.</li> </ul> <p>Afin de faciliter le d\u00e9ploiement de masse : </p> <ul> <li>Le logiciel doit \u00eatre facile a d\u00e9ployer sur des machines locales</li> <li>Le logiciel doit \u00eatre facile a d\u00e9ployer sur le cloud</li> <li>Le logiciel doit s'interconnecter \u00e0 l'infrastructure pr\u00e9sente</li> <li>Le logiciel doit \u00eatre performant et fiable</li> </ul>"},{"location":"developpeur/index.html#architecture-actuelle","title":"Architecture actuelle","text":"<pre>64107f540ffe876c27cc24d78dfa617d96921effd7214bad1195fded60be8209ce8d001e469444649091c977179798196d15afe37d742adfd3b8306fc2d44de9</pre><pre>5963d7fae8fbbde302bcb10e2eace19ecb2a0a01984e00788121d7c51ec782bfeff40ff33d8d95ebebe2861441d5eda41b33dbf3d73936d236aa481a4ce4d23c</pre>"},{"location":"developpeur/index.html#details-techniques","title":"Details techniques","text":"<p>Le tableau ci-dessus est simplifi\u00e9 grandement car toutes les composantes sont individuelles. Ce qui veux dire qu'une toutes les parties pouraient \u00eatre d\u00e9ploy\u00e9 sur un serveur diff\u00e9rent et tout de m\u00eame fonctionner, permettant de distribuer la charge de travail facilement.</p> <p>Le proxy Nginx permet de camoufler la s\u00e9paration du backend et frontend en r\u00e9unissant les deux parties sous la m\u00eame url. Il a aussi la tache de diriger les appels de sockets vers leurs machine interne dans le provider.</p> <p>Le frontend d\u00e9ssert la partie visuel de l'application.</p> <p>Le backend s'occupe de tous les services tel quel : </p> <ul> <li>La gestion des utilisateurs</li> <li>La gestion des quizs</li> <li>La gestion des m\u00e9dias</li> <li>La gestion des salles</li> </ul>"},{"location":"developpeur/index.html#liens-vers-details-supplementaires","title":"Liens vers d\u00e9tails suppl\u00e9mentaires","text":"<ul> <li>Gestion de l'authentification</li> <li>Gestion de la salle de Quiz</li> </ul>"},{"location":"developpeur/backend/api.html","title":"Api","text":""},{"location":"developpeur/backend/api.html#a-propos","title":"\u00c0 Propos","text":"<p>Ce projet utilise Node.js Express pour cr\u00e9er un backend simple pour l'application.</p>"},{"location":"developpeur/backend/api.html#routes-api","title":"Routes API","text":"<p>Vous pouvez consulter toutes les routes utilisables du backend ici</p> <ul> <li>User : https://documenter.getpostman.com/view/32663805/2sA2rCU28v#e942a4f4-321c-465b-bf88-e6c1f1d6f6c8</li> <li>Quiz : https://documenter.getpostman.com/view/32663805/2sA2rCU28v#732d980b-02fd-4807-b5bc-72725098b9b0</li> <li>Folders : https://documenter.getpostman.com/view/32663805/2sA2rCU28v#49ecd432-ccfc-4c8a-8390-b3962f0d5fd7</li> <li>Images : https://documenter.getpostman.com/view/32663805/2sA2rCU28v#58382180-d6f0-492d-80c3-e09de1c368b8</li> </ul>"},{"location":"developpeur/backend/auth.html","title":"Authentification","text":""},{"location":"developpeur/backend/auth.html#introduction","title":"Introduction","text":"<p>Le but du module d'authentification est de pouvoir facilement faire des blocks de code permettant une authentification personalis\u00e9e. Il est possible de le faire gr\u00e2ce a cette architecture. Pour la premi\u00e8re version de cette fonctionalit\u00e9e, l'introduction de OICD et de OAuth sont prioris\u00e9 ainsi que la migration du module d'authentification simple.</p>"},{"location":"developpeur/backend/auth.html#deconstruction-simple-de-la-structure","title":"D\u00e9construction simple de la structure","text":"<p>La structure est la suivante : </p> <p>Le AuthManager s'occupe de centraliser les requetes d'authentifications. Ce qui veux dire d'initialiser les autres modules et d'\u00eatre la source de v\u00e9rit\u00e9e dans au sujet de l'authentification. Les modules sont automatiquement charg\u00e9 par l'utilisation de variables d'environment.</p> <p>Le module s'occupe de creer les routes n\u00e9c\u00e9ssaires pour son fonctionnement et de cr\u00e9er les utilisateurs. Ces modules vont appeller le AuthManager afin de confirmer leurs actions avec le login/register de celui-ci</p> <p>Dans le cas de modules plus complexe, tels que le module Passport, la chaine peut \u00eatre prolong\u00e9e afin de maintenir centralis\u00e9e les actions. Chaque connecteur de PassportJs est initialis\u00e9 par le module de PassportJs.</p>"},{"location":"developpeur/backend/auth.html#besoins-exprimes","title":"Besoins exprim\u00e9s","text":"<p>Modularit\u00e9 et g\u00e9n\u00e9ricit\u00e9 : </p> <ul> <li>Le syst\u00e8me d'authentification doit \u00eatre adaptable \u00e0 diverses configurations, notamment pour r\u00e9pondre aux exigences sp\u00e9cifiques des diff\u00e9rentes universit\u00e9s ou institutions. </li> </ul> <p>Utilisation de diff\u00e9rentes m\u00e9thodes d'authentification : </p> <ul> <li>L'application doit permettre de g\u00e9rer plusieurs fournisseurs d'authentification (SSO, LDAP, OAuth, etc.) de mani\u00e8re centralis\u00e9e et flexible. </li> </ul> <p>Facilit\u00e9 de configuration : </p> <ul> <li>Le syst\u00e8me doit permettre une configuration simple et flexible, adapt\u00e9e \u00e0 diff\u00e9rents environnements (d\u00e9veloppement, production, etc.). </li> </ul> <p>Gestion des permissions : </p> <ul> <li>Il doit \u00eatre possible de d\u00e9finir et de mapper facilement les permissions et les r\u00f4les des utilisateurs pour s\u00e9curiser l\u2019acc\u00e8s aux diff\u00e9rentes fonctionnalit\u00e9s de l\u2019application. </li> </ul> <p>Maintien de la connexion : </p> <ul> <li>Le syst\u00e8me doit garantir la persistance de la connexion pendant toute la dur\u00e9e de l'utilisation de l'application (exemple : quiz), avec la possibilit\u00e9 de se reconnecter sans perte de donn\u00e9es en cas de d\u00e9connexion temporaire. </li> </ul>"},{"location":"developpeur/backend/auth.html#recis-utilisateurs-pris-en-comptes","title":"Recis utilisateurs pris en comptes","text":"<ul> <li>En tant qu'utilisateur de projet FOSS, je veux que le module d'authentifcation soit modulaire et g\u00e9n\u00e9rique afin de l'adapter a mes besoins. </li> <li>En tant qu'administrateur, je veux que les droits des utilisateurs soient inf\u00e9r\u00e9s par l'authentificateur de l'\u00e9tablissement.</li> <li>En tant qu'administrateur, je veux que la configuration des authentificateur soit simple</li> <li>En tant qu'administrateur, je veux configurer les connections a partir de variables d'env ou fichier de config.</li> <li>En tant qu'utilisateur, je veux que ma connexion soit stable.</li> <li>En tant qu'utilisateur, je veux pouvoir me reconnecter a une salle s'il y arrive un probl\u00e8me de connexion.</li> </ul>"},{"location":"developpeur/backend/auth.html#diagrammes","title":"Diagrammes","text":""},{"location":"developpeur/backend/auth.html#structure","title":"Structure","text":"<pre>4f74b5dda81671e686fd1e0bb0fe06708b018471702c46071208897ceee943c999d804d2b8ee9f881baa9ebceac501473e1e980e091376773d5f32ad5853f22a</pre><pre>7637de0d4dd9375a40b81ad1749807d1d8eba9a0a7456e27de1addcb313dcf91a4532786959e4ac0d08e9e5620523205aab7540289ed74a86f3dbfc3c8f244f3</pre>"},{"location":"developpeur/backend/auth.html#explication-des-communications-passport-js","title":"Explication des communications :  Passport Js","text":"<pre>c4903def73cc9bb49d2f805348a5a916eec33b1a251984ba09101126889c0e512cfbe65701ad31252a4d404409a5e136cb1b4cabd87a0bb0331aa478f4d1cda4</pre><pre>1d77d23af1c22f27d081fae637a088da9f14b5f51bde4088ad49136cde3a73e770bbb4ad708035504b257df55b1eabdb601cbe1403cbabf9b706068bd3a112a2</pre>"},{"location":"developpeur/backend/auth.html#explication-des-communications-simpleauth","title":"Explication des communications : SimpleAuth","text":"<pre>d535e76d0e5b57ebfefe2f8b529a44ddd1bbcd4e8e32cdbeb5faa948ea9ddae6fb642fa27ad99482aa329b636fd890de6a12bed4eedeb7600525f15e7a49cdf2</pre><pre>69a5bfadd662f0f816ab7b58e5265aea5aada207211dae19f22ab67acd309c3531aa4626620e9103ea5ca0b480c262129f034795f4b22cdd23bdd9bbe5e85641</pre>"},{"location":"developpeur/backend/auth.html#comment-les-boutons-sont-affiches","title":"Comment les boutons sont affich\u00e9s","text":"<pre>b57a76e6b7d3215c4f54822ca88edd6bb70ff03d4ca3bdd90e1e482e69b1043517a092ed62981b77754d937fbdb5d3a71e9e4c60e6f9140c46cc0630ee16cd47</pre><pre>cfd14439185de80e11b0e1ce21aa67866240c923c09b2c4d5bea3f019dee0582416e1fd52463a4e94f1db2c01782116888d6bfaeff11b60040677bcd6cc36f1f</pre>"},{"location":"developpeur/backend/auth.html#comment-les-sessions-sont-conservees","title":"Comment les sessions sont conserv\u00e9es","text":"<pre>6cbda1fa2cdb708b1c0add0c920e4d3902ff16d4b9fe5d30936d086e330f86c0e6e220646b2c72b808b1ab11e5e6ca77ab4a06520efa5b38deccbbee75c2baa8</pre><pre>c45d863403931fb06eb5f3c8f16e3137811845a05bdd9b4db05a97ebcf7637147063ff7d5dde6f01dd1fdd5be457e02178b9868ac981576fc3716f908a363f97</pre>"},{"location":"developpeur/backend/auth.html#configuration-des-variables-denvironnement","title":"Configuration des variables d'environnement","text":"<p>Example de configuration du fichier : <code>server/auth_config.json</code> :</p> <pre><code>{\n    \"auth\": {\n        \"passportjs\": // Module\n        [\n            {\n                \"gmatte\": { // Nom du sous-module Passport\n                    \"type\": \"oauth\", // type\n                    \"OAUTH_AUTHORIZATION_URL\": \"https://auth.gmatte.xyz/application/o/authorize/\",\n                    \"OAUTH_TOKEN_URL\": \"https://auth.gmatte.xyz/application/o/token/\",\n                    \"OAUTH_USERINFO_URL\": \"https://auth.gmatte.xyz/application/o/userinfo/\",\n                    \"OAUTH_CLIENT_ID\": \"--redacted--\",\n                    \"OAUTH_CLIENT_SECRET\": \"--Redacted--\",\n                    \"OAUTH_ADD_SCOPE\": \"groups\", // scopes suppl\u00e9mentaire n\u00e9c\u00e9ssaire pour le pivot\n                    \"OAUTH_ROLE_TEACHER_VALUE\": \"groups_evaluetonsavoir-prof\", // valeur de pivot afin de d\u00e9finir un enseignant\n                    \"OAUTH_ROLE_STUDENT_VALUE\": \"groups_evaluetonsavoir\" // valeur de pivot afin de d\u00e9finir un \u00e9tudiant\n                }\n            },\n            {\n                \"etsmtl\":{\n                    \"type\":\"oidc\",\n                    \"OIDC_CONFIG_URL\":\"https://login.microsoftonline.com/70aae3b7-9f3b-484d-8f95-49e8fbb783c0/v2.0/.well-known/openid-configuration\",\n                    \"OIDC_CLIENT_ID\": \"--redacted--\",\n                    \"OIDC_CLIENT_SECRET\": \"--redacted--\",\n                    \"OIDC_ADD_SCOPE\": \"\",\n                    \"OIDC_ROLE_TEACHER_VALUE\": \"groups_evaluetonsavoir-prof\",\n                    \"OIDC_ROLE_STUDENT_VALUE\": \"groups_evaluetonsavoir\"\n                }\n            }\n        ],\n        \"simpleauth\":{}\n    }\n}\n</code></pre>"},{"location":"developpeur/backend/base-de-donnees.html","title":"Type de base de donn\u00e9es","text":"<p>La base de donn\u00e9es est une mongoDB</p>"},{"location":"developpeur/backend/base-de-donnees.html#collections-disponibles","title":"Collections disponibles","text":"<ul> <li>Files : Ceci est la collection qui contient les diff\u00e9rents quiz et leurs questions.</li> <li>Folders : Ceci est la collection qui contient les dossiers qui servent \u00e0 la gestion des diff\u00e9rents quiz</li> <li>Images : C'est dans cette collection que sont stock\u00e9es les images utilis\u00e9es dans les quiz</li> <li>Users : Cette collection est utilis\u00e9e pour la gestion des utilisateurs</li> </ul>"},{"location":"developpeur/backend/base-de-donnees.html#information-sur-la-creation","title":"Information sur la cr\u00e9ation","text":"<p>Lors du d\u00e9marrage du projet, la base de donn\u00e9es est cr\u00e9\u00e9e automatiquement.</p>"},{"location":"developpeur/backend/katex.html","title":"KaTeX","text":"<p>KaTeX est le module qui s'occupe de formater les formules math\u00e9matiques selon la configuration donn\u00e9e.</p> <p>Les formules entour\u00e9es de $$ s'afficheront centr\u00e9es sur leur propre ligne </p> <p><code>.replace(/\\$\\$(.*?)\\$\\$/g, (_, inner) =&gt; katex.renderToString(inner, { displayMode: true }))</code></p> <p>alors que les formules entour\u00e9es de $ s'afficheront sur la m\u00eame ligne</p> <p><code>.replace(/\\$(.*?)\\$/g, (_, inner) =&gt; katex.renderToString(inner, { displayMode: false }))</code></p> <p>La configuration du formatage peut \u00eatre trouv\u00e9e dans le fichier TextType.ts situ\u00e9 dans le dossier EvalueTonSavoir/client/src/components/GiftTemplate/templates</p> <p>C'est aussi dans ce fichier que le format markdown est pris en charge.</p>"},{"location":"developpeur/backend/katex.html#editeur-de-quiz","title":"\u00c9diteur de quiz","text":"<p>Pour l'affichage dans l'\u00e9diteur de quiz, on peut retrouver la classe TextType \u00eatre appliqu\u00e9e sur diff\u00e9rents \u00e9l\u00e9ments du dossier templates, par exemple la classe Numerical.ts.</p> <p>On peut voir ici que le TextType est appliqu\u00e9 sur le contenu de la question: <pre><code>&lt;p style=\"${ParagraphStyle(state.theme)}\"&gt;${TextType({text: stem })}&lt;/p&gt;\n</code></pre></p> <p>Selon ce qui avait \u00e9t\u00e9 \u00e9crit dans la question, la classe s'occupera de formatter les bonnes sections.</p>"},{"location":"developpeur/backend/katex.html#affichage-de-questions","title":"Affichage de questions","text":"<p>Le module React-latex \u00e9tait utilis\u00e9 pour le formatage des questions durant un quiz, mais cela a apport\u00e9 le probl\u00e8me de disparit\u00e9 d'affichage entre la cr\u00e9ation et l'affichage des questions avec des formules math\u00e9matiques. Les classes affichant les questions durant un quiz peuvent utiliser ce format, mais avec une manipulation de plus.</p> <p>Les variables contenant la question doivent d'abord avoir un type TextFormat pour pouvoir faire appel \u00e0 la classe qui s'occupe du format sous le module KaTeX. Puis, \u00e9tant sur un environnement React, il faut utiliser la propri\u00e9t\u00e9 dangerouslySetInnerHTML pour afficher la question correctement.</p> <p><code>&lt;div dangerouslySetInnerHTML={{ __html: TextType({text: questionContent}) }} /&gt;</code></p> <p>Ce type de manipulation peut \u00eatre utilis\u00e9 dans d'autre environnement React si on veut \u00e9viter d'utiliser React-latex.</p>"},{"location":"developpeur/backend/quiz.html","title":"Example de Quiz","text":"<pre><code>//-----------------------------------------//\n// Examples from gift/format.php.\n//-----------------------------------------//\n\nWho's buried in Grant's tomb?{~Grant ~Jefferson =no one}\n\nGrant is {~buried =entombed ~living} in Grant's tomb.\n\nGrant is buried in Grant's tomb.{FALSE}\n\nWho's buried in Grant's tomb?{=no one =nobody}\n\nWhen was Ulysses S. Grant born?{#1822:5}\n\nMatch the following countries with their corresponding capitals. {\n    =Canada -&gt; Ottawa\n    =Italy  -&gt; Rome\n    =Japan  -&gt; Tokyo\n    =India  -&gt; New Delhi\n    ####It's good to know the capitals\n}\n\n//-----------------------------------------//\n// More complicated examples.\n//-----------------------------------------//\n\n::Grant's Tomb::Grant is {\n        ~buried#No one is buried there.\n        =entombed#Right answer!\n        ~living#We hope not!\n} in Grant's tomb.\n\nDifficult multiple choice question.{\n        ~wrong answer           #comment on wrong answer\n        ~%50%half credit answer #comment on answer\n        =full credit answer     #well done!}\n\n::Jesus' hometown (Short answer ex.):: Jesus Christ was from {\n        =Nazareth#Yes! That's right!\n        =%75%Nazereth#Right, but misspelled.\n        =%25%Bethlehem#He was born here, but not raised here.\n}.\n\n//this comment will be ignored by the filter\n::Numerical example::\nWhen was Ulysses S. Grant born? {#\n        =1822:0      #Correct! 100% credit\n        =%50%1822:2  #He was born in 1822.\n                    You get 50% credit for being close.\n}\n</code></pre>"},{"location":"developpeur/backend/salle-de-quiz.html","title":"Salles de Quiz","text":""},{"location":"developpeur/backend/salle-de-quiz.html#introduction","title":"Introduction","text":"<p>Les salles de quiz ont \u00e9t\u00e9 extraites dans leur propre container afin de limiter les d\u00e9gats li\u00e9s soit a une surutilisation d'une salle ou une attaque sur le logiciel.</p> <p>En \u00e9ffet, le d\u00e9couplement permet a un quiz de: </p> <ul> <li>Survivre m\u00eame si le backend est non-fonctionnel</li> <li>Mourir sans entrainer toute l'application avec elle</li> <li>Cr\u00e9er/Supprimer des salles automatiquement d\u00e9pendant de la demande</li> </ul> <p>Pour \u00e9ffectuer ceci il faut \u00e9ffectuer une petite gymnastique. Il y a une route dans l'api servant \u00e0 gerer les salles. Lorsqu'un utilisateur demande le socket d'une salle : \"/api/rooms/{id}/socket\", la requette rebondit sur le proxy Nginx. Celui-ci contacte le backend afin d'obtenir l'addresse de l'ordinateur auquel envoyer la requette et redirige le socket vers ce pc.</p>"},{"location":"developpeur/backend/salle-de-quiz.html#deconstruction-simple-de-la-structure","title":"D\u00e9construction simple de la structure","text":"<p>Un module suppl\u00e9mnetaire a \u00e9t\u00e9 ajout\u00e9 \u00e0 la structure : Rooms.</p> <p>L'objet <code>room</code> est la d\u00e9finition d'une salle de fa\u00e7on minimaliste, cette d\u00e9finission est aggrandie avec l'information r\u00e9cotl\u00e9 du \"provider\". Le <code>provider</code> est le syst\u00e8me g\u00e9rant les diff\u00e9rentes salles. Dans l'impl\u00e9mentation \u00e9ffectu\u00e9e, il s'agit de docker.</p> <p>Lorsque l'api des salles est instanti\u00e9, celui-ci est li\u00e9 avec un \"provider\", d\u00e9finissant comment les salles seront cr\u00e9\u00e9es. L'api des salles permet de les ajouter, les supprimer, et les consulter les salles.</p> <p>L'api lance deux \"jobs\":</p> <ul> <li>Une v\u00e9rification de l'\u00e9tat de sant\u00e9 des salles. Celle-ci roule tous les 10 secondes et met a jour les salles.</li> <li>Une suppression des salles. Celle-ci roule tous les 30 secondes et supprimme automatiquement les salles ayant la mention de suppression.</li> </ul>"},{"location":"developpeur/backend/salle-de-quiz.html#besoins-exprimes","title":"Besoins exprim\u00e9s","text":"<p>Fiabilite : </p> <ul> <li>Nous voulons s'assurer qu'il soit possible d'avoir un grand nombre d'\u00e9l\u00e8ves pr\u00e9sent sans qu'il y ait des probl\u00e8mes de d\u00e9connexions</li> <li>Nous voulons que le temps de r\u00e9ponse soit bas </li> <li>Nous voulons que le syst\u00e8me soit capable de fonctionner de facon ind\u00e9pendante</li> </ul>"},{"location":"developpeur/backend/salle-de-quiz.html#recis-utilisateurs-pris-en-comptes","title":"Recis utilisateurs pris en comptes","text":"<ul> <li>En tant qu'enseignant, je veux que tous mes \u00e9l\u00e8ves soient capable de se connecter a la salle de classe rapidement</li> <li>En tant qu'enseignant, je veux que la salle de quiz puisse survivre des pannes li\u00e9es aux autres modules de l'aplication</li> <li>En tant qu'administrateur, je veux que les salles soient ind\u00e9pendantes et qui ne touche pas aux performances des autres salles</li> <li>En tant qu'administrateur, je veux que les salles puissent \u00eatre h\u00e9berg\u00e9es s\u00e9par\u00e9ment du projet</li> </ul>"},{"location":"developpeur/backend/salle-de-quiz.html#diagrammes","title":"Diagrammes","text":""},{"location":"developpeur/backend/salle-de-quiz.html#structure","title":"Structure","text":"<pre>153fb6f0aec86a8579460a3606ab4fa63446d2f3a1b44d8a247f2a5366c4cd9fc56925a24915deee0b9c0de42e3fda9f7a680f7c044fa797a50119efa5060830</pre><pre>83c3def205acf99462106a998261c140a7fdb7a3c70970519a227cdc67136b422d30c73b25338c16b0241228d2ebc48f7bbda72fcd511ed69944f66858990aac</pre> <p>Remarque:  Les signatures de fonctions semblent un peu partout car il y a des fonctions de classes standard, des appels HTTPS et des appels de sockets dans le m\u00eame diagramme.</p>"},{"location":"developpeur/backend/salle-de-quiz.html#diagramme-de-sequence-demontrant-les-communications","title":"Diagramme de s\u00e9quence d\u00e9montrant les communications","text":"<pre>6349332ba0e532d7573380a986db111b77c01f0a4b9c9f0aa8403344224912e443d71a768aa03a4b35613d7c5f25240e9f934163eed5ca89f70aa513cb553633</pre><pre>8ecf626bd5292b51f90943e061f14b29517831d45e9f67f619e476da9549213214d2411d1e7289d4c111cf991d8d8365f8eddce05faf9a076757ebac9345e219</pre>"},{"location":"developpeur/backend/salle-de-quiz.html#api","title":"API","text":""},{"location":"developpeur/deploiements/local.html","title":"Local","text":""},{"location":"developpeur/deploiements/local.html#prerequis","title":"Pr\u00e9requis","text":"<ul> <li> <p>Assurez-vous d'avoir Node JS install\u00e9 en t\u00e9l\u00e9chargeant la derni\u00e8re version depuis https://nodejs.org/en.</p> </li> <li> <p>Ensuite, assurez-vous d'avoir acc\u00e8s \u00e0 un serveur MongoDB de d\u00e9veloppement</p> </li> </ul> <p>Pour plus d'informations sur la base de donn\u00e9es, veuillez consulter la documentation [[ici|Base-de-donn\u00e9es]]</p> <ul> <li>Cloner le projet avec la commande suivante :     <pre><code>git clone https://github.com/ets-cfuhrman-pfe/EvalueTonSavoir.git\n</code></pre></li> </ul>"},{"location":"developpeur/deploiements/local.html#etape-1-demarrage-du-backend","title":"\u00c9tape 1 - d\u00e9marrage du backend","text":"<ol> <li> <p>Naviguez vers le r\u00e9pertoire du projet en utilisant la commande suivante :    <pre><code>cd .\\EvalueTonSavoir\\server\\\n</code></pre></p> </li> <li> <p>Assurez-vous de cr\u00e9er le fichier .env et d'y ajouter les param\u00e8tres appropri\u00e9s. Vous pouvez vous inspirer du fichier .env.example pour conna\u00eetre les param\u00e8tres n\u00e9cessaires.</p> </li> </ol> <p>[[Voir ici la documentation des configurations|Configurations]]</p> <ol> <li> <p>Installez les d\u00e9pendances avec la commande suivante :    <pre><code>npm install\n</code></pre></p> </li> <li> <p>D\u00e9marrez le serveur en utilisant la commande suivante :    <pre><code>npm run dev\n</code></pre></p> </li> <li> <p>Ouvrez votre navigateur et acc\u00e9dez \u00e0 l'URL indiqu\u00e9e dans la console (par exemple, http://localhost:4400).</p> </li> </ol>"},{"location":"developpeur/deploiements/local.html#etape-2-demarrage-du-frontend","title":"\u00c9tape 2 - D\u00e9marrage du frontend","text":"<ol> <li> <p>Naviguez vers le r\u00e9pertoire du projet en utilisant la commande suivante :    <pre><code>cd .\\EvalueTonSavoir\\client\\\n</code></pre></p> <p>[!WARNING] Assurez-vous que le backend est en cours d'ex\u00e9cution avant de d\u00e9marrer le frontend. \\ Notez \u00e9galement l'URL du serveur pour le fichier <code>.env</code>.</p> </li> <li> <p>Assurez-vous de cr\u00e9er le fichier .env et d'y ajouter les param\u00e8tres appropri\u00e9s. Vous pouvez vous inspirer du fichier .env.example pour conna\u00eetre les param\u00e8tres n\u00e9cessaires.</p> </li> </ol> <p>[[Voir ici la documentation des configurations|Configurations]]</p> <ol> <li> <p>Installez les d\u00e9pendances avec la commande suivante :    <pre><code>npm install\n</code></pre></p> </li> <li> <p>D\u00e9marrez le frontend avec la commande suivante :    <pre><code>npm run dev\n</code></pre></p> </li> <li> <p>Ouvrez votre navigateur et acc\u00e9dez \u00e0 l'URL indiqu\u00e9e dans la console (par exemple, http://localhost:5173/).</p> </li> </ol>"},{"location":"developpeur/deploiements/prod.html","title":"Prod","text":""},{"location":"developpeur/deploiements/prod.html#introduction","title":"Introduction","text":"<p>Nous avons choisi d'ex\u00e9cuter les composantes de cette application avec Docker, car cela simplifie le processus de gestion des processus d'application.</p> <p>Voici un diagramme de d\u00e9ploiement expliquant la relation des composantes et comment les images Docker sont cr\u00e9\u00e9es et d\u00e9ploy\u00e9es dans un serveur.</p> <pre>80cf6c902e4bf2abe712c416ba8aa46c9891c780af9aabdfe28b9e92f9b9306af832f1a141c39c4b5e59fbff6a93c0f32f3447c185ecf58086809750371ebb2b</pre><pre>a1e20364546e459334b06f43f204386e4e1ce80c8851dbdacaaeadee8bfe707d62300924bf0037e4ea07c561cac0383e5385cd37f539043d9e5325c8f58b7885</pre>"},{"location":"developpeur/deploiements/prod.html#prerequis","title":"Pr\u00e9requis","text":"<p>Les STI nous a fourni un serveur avec les sp\u00e9cifications suivantes :</p> <ul> <li>Ubuntu 22.04 LTS</li> <li>CPU : 4 c\u0153urs</li> <li>RAM : 8 Go</li> <li>HDD : 100 Go</li> <li>Certificat SSL</li> </ul> <p>Les STI ont d\u00e9j\u00e0 effectu\u00e9 la configuration initiale de la machine selon leurs normes de mise en place d'un serveur pour assurer la bonne maintenance et s\u00e9curit\u00e9 au sein de leur infrastructure. Cette configuration inclut un utilisateur non root.</p> <p>Vous aurez \u00e9galement besoin d'un compte Docker Hub, ou vous pouvez simplement cr\u00e9er une PR sur le projet principal et elle sera d\u00e9ploy\u00e9e automatiquement.</p>"},{"location":"developpeur/deploiements/prod.html#etape-1-installation-de-docker","title":"\u00c9tape 1 - Installation de Docker","text":"<p>Connectez-vous avec les informations d'identification de l'ETS : <pre><code>ssh &lt;email&gt;@&lt;IP&gt;\n</code></pre></p> <p>Tout d'abord, mettez \u00e0 jour votre liste existante de packages : <pre><code>sudo apt update\n</code></pre></p> <p>Ensuite, installez quelques packages pr\u00e9requis qui permettent \u00e0 apt d'utiliser des packages via HTTPS :</p> <p>[!WARNING] Si vous voyez l'erreur suivante, ARR\u00caTEZ. Contactez les STI pour r\u00e9soudre le probl\u00e8me. \\ <code>Waiting for cache lock: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 10703 (apt)</code> <pre><code>sudo apt install apt-transport-https ca-certificates curl software-properties-common\n</code></pre></p> <p>Ajoutez la cl\u00e9 GPG du r\u00e9f\u00e9rentiel Docker officiel \u00e0 votre syst\u00e8me : <pre><code>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n</code></pre></p> <p>Ajoutez le r\u00e9f\u00e9rentiel Docker aux sources APT : <pre><code>echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n</code></pre></p> <p>Mettez \u00e0 jour \u00e0 nouveau votre liste existante de packages pour que l'ajout soit reconnu : <pre><code>sudo apt update\n</code></pre></p> <p>Assurez-vous que vous vous appr\u00eatez \u00e0 installer \u00e0 partir du r\u00e9f\u00e9rentiel Docker plut\u00f4t que du r\u00e9f\u00e9rentiel Ubuntu par d\u00e9faut : <pre><code>apt-cache policy docker-ce\n</code></pre></p> <p>Vous verrez une sortie comme celle-ci, bien que le num\u00e9ro de version pour Docker puisse \u00eatre diff\u00e9rent : <pre><code>docker-ce:\n  Installed: (none)\n  Candidate: 5:26.0.0-1~ubuntu.22.04~jammy\n  Version table:\n     5:26.0.0-1~ubuntu.22.04~jammy 500\n        500 https://download.docker.com/linux/ubuntu jammy/stable amd64 Packages\n     5:25.0.5-1~ubuntu.22.04~jammy 500\n        500 https://download.docker.com/linux/ubuntu jammy/stable amd64 Packages\n...\n</code></pre></p> <p>Installez Docker : <pre><code>sudo apt install docker-ce\n</code></pre></p> <p>V\u00e9rifiez que Docker fonctionne : <pre><code>sudo systemctl status docker\n</code></pre></p> <p>La sortie devrait \u00eatre similaire \u00e0 ce qui suit, montrant que le service est actif et en cours d'ex\u00e9cution : <pre><code>\u25cf docker.service - Docker Application Container Engine\n     Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)\n     Active: active (running) since Fri 2024-04-05 13:20:12 EDT; 1min 24s ago\nTriggeredBy: \u25cf docker.socket\n       Docs: https://docs.docker.com\n   Main PID: 19389 (dockerd)\n      Tasks: 10\n     Memory: 28.7M\n        CPU: 172ms\n     CGroup: /system.slice/docker.service\n             \u2514\u250019389 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock\n...\n</code></pre></p> <p>[!NOTE] Si Docker ne roule pas, p.ex. vous voyez : <pre><code>\u25cb docker.service - Docker Application Container Engine\n     Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)\n     Active: inactive (dead)\n</code></pre> Vous devez d\u00e9marrer Docker : <pre><code>sudo systemctl start docker\n</code></pre></p>"},{"location":"developpeur/deploiements/prod.html#etape-2-installation-de-docker-compose","title":"\u00c9tape 2 - Installation de Docker Compose","text":"<p>Cr\u00e9ez un r\u00e9pertoire d'installation Docker Compose : <pre><code>mkdir -p ~/.docker/cli-plugins/\n</code></pre></p> <p>Obtenez Docker Compose : <pre><code>curl -SL https://github.com/docker/compose/releases/download/v2.26.1/docker-compose-linux-x86_64 -o ~/.docker/cli-plugins/docker-compose\n</code></pre></p> <p>Ensuite, d\u00e9finissez les permissions correctes pour que la commande docker compose soit ex\u00e9cutable : <pre><code>chmod +x ~/.docker/cli-plugins/docker-compose\n</code></pre></p> <p>Pour v\u00e9rifier que l'installation a r\u00e9ussi, vous pouvez ex\u00e9cuter : <pre><code>docker compose version\n</code></pre></p>"},{"location":"developpeur/deploiements/prod.html#etape-3-ajouter-notre-projet","title":"\u00c9tape 3 - Ajouter notre projet","text":"<p>Commencez par cr\u00e9er un nouveau r\u00e9pertoire dans votre dossier personnel : <pre><code>mkdir ~/EvalueTonSavoir\n</code></pre></p> <p>Puis d\u00e9placez-vous dans le r\u00e9pertoire : <pre><code>cd ~/EvalueTonSavoir\n</code></pre></p> <p>Cr\u00e9ez un fichier <code>docker-compose.yaml</code> \u00e0 partir du d\u00e9p\u00f4t GitHub : <pre><code>curl -SL https://raw.githubusercontent.com/ets-cfuhrman-pfe/EvalueTonSavoir/main/docker-compose.yaml -o docker-compose.yaml\n</code></pre></p> <p>[!NOTE] Avant de continuer, veuillez noter qu'il est crucial de mettre \u00e0 jour les variables d'environnement dans le script, car les valeurs actuelles sont des mod\u00e8les g\u00e9n\u00e9riques. Assurez-vous de personnaliser ces variables selon les besoins sp\u00e9cifiques de votre environnement avant d'ex\u00e9cuter le script.</p> <p>Avec le fichier docker-compose.yml en place, vous pouvez maintenant ex\u00e9cuter Docker Compose pour d\u00e9marrer votre environnement : <pre><code>sudo docker compose up -d\n</code></pre></p> <p>V\u00e9rifiez que les services fonctionne : <pre><code>sudo docker ps -a\n</code></pre></p>"},{"location":"developpeur/deploiements/prod.html#conclusion","title":"Conclusion","text":"<p>F\u00e9licitations ! Vous avez maintenant avec succ\u00e8s configur\u00e9 et lanc\u00e9 EvalueTonSavoir sur votre serveur, pr\u00eat \u00e0 \u00eatre utilis\u00e9. </p>"},{"location":"developpeur/documentation/a-propos.html","title":"A propos","text":""},{"location":"developpeur/documentation/a-propos.html#lancer-la-documentation","title":"Lancer la documentation","text":"<p>Pour lancer la documentation, il faut installer python et entrer dans le dossier documentation. Il faut ensuite installer les d\u00e9pendances avec <code>pip install -r requirements.txt</code>. Pour lancer le mode d\u00e9veloppement il faut executer <code>python -m mkdocs serve</code> Afin d'accellerer le d\u00e9ploiement et ne pas \u00eatre touch\u00e9 par des \u00e9rreurs de \"rate-limiting\", il est pr\u00e9f\u00e9rable d'utiliser une image docker de plantuml. Pour cela, il faut utiliser la commande suivante : <code>docker run -d --name plantuml -p 8080:8080 plantuml/plantuml-server:tomcat</code></p>"},{"location":"developpeur/documentation/a-propos.html#deploiement","title":"Deploiement","text":"<p>Le code est automatiquement d\u00e9ploy\u00e9 par la github-action <code>create-docs.yaml</code> Celle-ci ouvre le repo et fait les memes \u00e9tapes que \"lancer la documentation\". Il y a une diff\u00e9rence, elle utilise <code>build</code> au lieu de <code>serve</code> pour ensuite publier avec l'outil <code>ghp-import</code>. La page est pouss\u00e9e sur la branche <code>gh-pages</code> et ensuite publi\u00e9 en tant que gh-page</p>"},{"location":"developpeur/documentation/a-propos.html#themes-et-plugins","title":"Themes et Plugins","text":"<p>Si vous ajoutez des plugins, veuillez mettre a jour le fichier <code>requirements.txt</code>.</p> <p>La documentation utilise MkDocs avec le theme mat\u00e9rial. Il y a bien des fonctionalit\u00e9es tel que les code-blocks qui peuvent \u00eatre activ\u00e9s. Vous pouvez avoir acc\u00e8s a la documentation ici : https://squidfunk.github.io/mkdocs-material/reference/code-blocks/</p>"},{"location":"developpeur/documentation/a-propos.html#autre-methode-de-lancement-virtuel","title":"Autre m\u00e9thode de lancement (virtuel)","text":"<p>Si vous avez un probleme avec votre environement et vous avez besoin d'un environement virtuel, il s'agit de faire <code>python -m venv .venv</code> dans le dossier document et d'activer cet environemment avec le fichier activate (changeant depedant de votre invite de commande) : <code>.venv\\script\\activate</code> vous pouvez ensuite continuer les autres \u00e9tapes.</p>"},{"location":"developpeur/frontend/index.html","title":"Index","text":""},{"location":"developpeur/frontend/index.html#a-propos","title":"\u00c0 Propos","text":"<p>Ce projet repr\u00e9sente une interface utilisateur React pour notre application.</p>"},{"location":"developpeur/frontend/index.html#gift-text-format-render-code-source","title":"GIFT text format render (code source)","text":"<p>Le code original a \u00e9t\u00e9 d\u00e9velopp\u00e9 pour cr\u00e9er une extension VS afin de prendre en charge le format de texte GIFT.</p> <p>Le code peut \u00eatre trouv\u00e9 ici: https://codesandbox.io/s/gift-templates-iny09</p> <p>Nous avons d\u00e9cid\u00e9 de r\u00e9utiliser ce code car il fournit un aper\u00e7u proche de ce \u00e0 quoi ressemblent les quiz dans Moodle. Ce qui est une plateforme bien connue \u00e0 l'\u00c9cole de technologie sup\u00e9rieure (\u00c9TS).</p> <p>Pour r\u00e9utiliser le code, nous avons d\u00fb installer les packages NPM suivants:</p> <ul> <li>katex : Une biblioth\u00e8que JavaScript rapide et facile \u00e0 utiliser pour le rendu math\u00e9matique TeX sur le web.</li> <li>marked : Un analyseur syntaxique et un compilateur de markdown. Construit pour la vitesse.</li> <li>nanoid : Un g\u00e9n\u00e9rateur d'identifiants de cha\u00eene unique, s\u00e9curis\u00e9, convivial pour les URL et minuscule (108 octets) pour JavaScript.</li> <li>gift-pegjs : Un analyseur GIFT pour JavaScript utilisant PEG.js.</li> <li>@types/katex : D\u00e9finitions TypeScript pour katex.</li> <li>@types/marked : D\u00e9finitions TypeScript pour marked.</li> <li>@types/nanoid : D\u00e9finitions TypeScript pour nanoid.</li> </ul>"},{"location":"utilisateur/configuration.html","title":"Configuration","text":"<p>[!NOTE] Chaque projet contient un fichier <code>.env.example</code> fournissant des exemples de configuration. Assurez-vous de consulter ce fichier pour vous inspirer des param\u00e8tres n\u00e9cessaires \u00e0 votre configuration.</p> <p>[!NOTE] Ce sont toutes les options de configuration. N'h\u00e9sitez pas \u00e0 ouvrir une PR si vous en voyez qui manquent.</p>"},{"location":"utilisateur/configuration.html#options-de-configuration-backend","title":"Options de Configuration Backend","text":"Variable d'Environnement Description Exemple Optionnel <code>PORT</code> Le port sur lequel l'application fonctionne 4400 non <code>MONGO_URI</code> La cha\u00eene de connexion pour se connecter \u00e0 la base de donn\u00e9es mongodb <code>mongodb://localhost:27017</code> or <code>mongodb://127.0.0.1:27017</code> (the former can cause trouble on Windows depending on hosts files) non <code>MONGO_DATABASE</code> Le nom souhait\u00e9 pour la base de donn\u00e9es evaluetonsavoir non <code>EMAIL_SERVICE</code> Le service utilis\u00e9 pour les e-mails gmail non <code>SENDER_EMAIL</code> L'adresse e-mail utilis\u00e9e pour l'envoi monadresse@gmail.com non <code>EMAIL_PSW</code> Le mot de passe de l'adresse e-mail 'monmotdepasse' non <code>JWT_SECRET</code> Le secret utilis\u00e9 pour la gestion des JWT monsecretJWT non <code>FRONTEND_URL</code> URL du frontend, y compris le port http://localhost:5173 non"},{"location":"utilisateur/configuration.html#options-de-configuration-frontend","title":"Options de Configuration Frontend","text":"Variable d'Environnement Description Exemple Optionnel <code>VITE_BACKEND_URL</code> URL du backend, y compris le port http://localhost:4400 non <code>VITE_AZURE_BACKEND_URL</code> URL du backend, y compris le port http://localhost:4400 non"},{"location":"utilisateur/deploiment.html","title":"D\u00e9ploiement","text":"<p>Les m\u00e9thodes recommand\u00e9es de d\u00e9ploiement sont via Ansible et Opentofu. Ansible est utilis\u00e9s afin de faire un d\u00e9ploiement sur un serveur local, opentofu sur le cloud.</p>"},{"location":"utilisateur/deploiment.html#ansible","title":"Ansible","text":"<p>Le d\u00e9ploiement avec ansible est un d\u00e9ploiement simplifi\u00e9. Il vous suffis d'avoir un ordinateur linux/mac ou pouvant faire ex\u00e9cuter WSL2 dans le cas de windows. Il faut ensuite utiliser le gestionnaire de paquet (souvent apt) afin d'installer le paquet <code>ansible-core</code>, d'autres m\u00e9thodes sont indiqu\u00e9es dans la documentation officielle de ansible. Une fois le tout fais, vous pouvez tel\u00e9charger les fichiers n\u00e9c\u00e9ssaire et lancer la commande <code>ansible-playbook -i inventory.ini deploy.yml</code></p>"},{"location":"utilisateur/deploiment.html#opentofu","title":"OpenTofu","text":"<p>Le d\u00e9ploiement avec OpenTofu est un peu plus complexe mais il permet d'h\u00e9berger la solution sur votre cloud pr\u00e9f\u00e9r\u00e9. Il suffit d'installer OpenTofu et de t\u00e9l\u00e9chgarger les fichiers n\u00e9c\u00e9ssaires. Un Readme est inclus afin d'organiser votre grape de serveurs.</p>"}]}